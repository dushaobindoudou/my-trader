# 知识库模块页面规划

## 页面结构

### 1. 主页面：知识库列表
**路径**: `/knowledge`
**功能**:
- 显示所有知识库条目列表（卡片式或列表式）
- 左侧筛选面板（主分类、标签、主题、时间范围、置信度）
- 顶部搜索框
- 顶部操作栏（新建信息、导出）
- 分页功能

### 2. 主题管理页面
**路径**: `/knowledge/topics`
**功能**:
- 显示所有主题列表（卡片式）
- 主题创建、编辑、删除
- 显示每个主题的条目数量
- 快速跳转到主题详情

### 3. 主题详情页面
**路径**: `/knowledge/topics/[id]`
**功能**:
- 显示主题信息（名称、描述、颜色、图标）
- 显示该主题下的所有条目列表
- 支持在该主题下筛选和搜索
- 支持从主题中移除条目

## 二级导航设计

在 `/knowledge` 路径下，使用 Tabs 组件实现二级导航：

```
┌─────────────────────────────────────────────────────────┐
│  知识库                                                  │
│  ┌───────────────────────────────────────────────────┐  │
│  │ [全部] [主题]                                      │  │  ← 二级导航
│  └───────────────────────────────────────────────────┘  │
│                                                          │
│  [筛选面板]        [列表/卡片展示]                        │
│                                                          │
└─────────────────────────────────────────────────────────┘
```

**导航项**:
1. **全部** - `/knowledge` 或 `/knowledge/entries` - 显示所有条目
2. **主题** - `/knowledge/topics` - 主题管理

## 页面跳转关系

```
/knowledge (全部条目)
  ├─ 点击条目 → 查看详情（对话框或详情页）
  ├─ 新建信息 → 打开录入对话框
  ├─ 筛选/搜索 → 更新列表
  └─ 点击主题标签 → /knowledge/topics/[id]

/knowledge/topics (主题管理)
  ├─ 创建主题 → 打开主题创建对话框
  ├─ 编辑主题 → 打开主题编辑对话框
  ├─ 删除主题 → 确认对话框
  └─ 点击主题卡片 → /knowledge/topics/[id]

/knowledge/topics/[id] (主题详情)
  ├─ 显示该主题下的所有条目
  ├─ 支持筛选和搜索（只在该主题下）
  ├─ 从主题中移除条目
  └─ 返回主题管理 → /knowledge/topics
```

## 导航实现方案

### 方案一：使用 Tabs 组件（推荐）
在 `/knowledge` 布局中使用 shadcn/ui 的 Tabs 组件：

```tsx
<Tabs defaultValue="entries">
  <TabsList>
    <TabsTrigger value="entries">全部</TabsTrigger>
    <TabsTrigger value="topics">主题</TabsTrigger>
  </TabsList>
  <TabsContent value="entries">
    {/* 条目列表 */}
  </TabsContent>
  <TabsContent value="topics">
    {/* 主题管理 */}
  </TabsContent>
</Tabs>
```

### 方案二：使用路由导航
创建子路由：
- `/knowledge` - 显示条目列表
- `/knowledge/topics` - 主题管理页面
- `/knowledge/topics/[id]` - 主题详情页面

在知识库页面添加导航链接。

## 推荐方案

**使用方案一（Tabs）**，原因：
1. 更简洁，无需跳转
2. 用户体验更好，无需刷新页面
3. 可以保持筛选状态

但主题详情页面使用方案二（路由），因为需要独立的 URL。

## 实现步骤

1. 创建类型定义
2. 创建数据库工具函数
3. 创建 API 路由
4. 创建二级导航组件
5. 实现知识库主页面
6. 实现主题管理页面
7. 实现主题详情页面

